<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Blackjack Tease ğŸƒğŸ»</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸƒ</text></svg>">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="loading-overlay" id="loading" style="display: none;">
        <div class="spinner"></div>
        <div class="loading-text" id="loading-text">Connexion...</div>
    </div>

    <div class="screen active" id="screen-home">
        <div class="logo">
            <div class="logo-icon">ğŸƒğŸ»</div>
            <h1>Blackjack Tease</h1>
            <p>Multijoueur en temps rÃ©el !</p>
        </div>
        <div class="btn-group">
            <button class="btn" onclick="showScreen('screen-create')">ğŸ® CrÃ©er une partie</button>
            <button class="btn btn-secondary" onclick="showScreen('screen-join')">ğŸ”— Rejoindre</button>
        </div>
    </div>
    
    <div class="screen" id="screen-create">
        <div class="logo"><div class="logo-icon">ğŸ¯</div><h1>CrÃ©e ta partie</h1></div>
        <div class="input-group"><label>Ton pseudo</label><input type="text" id="create-name" placeholder="Ex: Antonin" maxlength="10"></div>
        <div class="input-group"><label>Choisis ton emoji</label><div class="emoji-picker" id="create-emoji-picker"></div></div>
        <button class="btn btn-success" onclick="createRoom()">âœ¨ CrÃ©er</button>
        <button class="btn btn-secondary btn-small" style="margin-top: 0.75rem;" onclick="showScreen('screen-home')">â† Retour</button>
    </div>
    
    <div class="screen" id="screen-join">
        <div class="logo"><div class="logo-icon">ğŸ”—</div><h1>Rejoindre</h1></div>
        <div class="input-group"><label>Code de la partie</label><input type="text" id="join-code" placeholder="XXXX" maxlength="4" style="text-transform: uppercase; letter-spacing: 0.2em; font-size: 1.4rem;"></div>
        <div class="input-group"><label>Ton pseudo</label><input type="text" id="join-name" placeholder="Ex: Tom" maxlength="10"></div>
        <div class="input-group"><label>Choisis ton emoji</label><div class="emoji-picker" id="join-emoji-picker"></div></div>
        <button class="btn btn-success" onclick="joinRoom()">ğŸš€ Rejoindre</button>
        <button class="btn btn-secondary btn-small" style="margin-top: 0.75rem;" onclick="showScreen('screen-home')">â† Retour</button>
    </div>
    
    <div class="screen" id="screen-lobby">
        <div class="logo"><div class="logo-icon">ğŸ‘¥</div><h1>Salon</h1></div>
        <div class="room-code">
            <div class="room-code-label">Code de la partie</div>
            <div class="room-code-value" id="lobby-code">XXXX</div>
            <div class="room-code-copy" onclick="copyCode()">ğŸ“‹ Copier</div>
        </div>
        <div class="players-lobby" id="players-lobby"></div>
        <div class="waiting-text" id="waiting-text">En attente...</div>
        <button class="btn btn-success" id="btn-start-game" onclick="hostStartGame()" style="display: none;">ğŸ² Lancer !</button>
    </div>
    
    <div class="screen" id="screen-bet">
        <div class="logo"><div class="logo-icon">ğŸº</div><h1>Ta mise</h1><p id="bet-dealer-info">Banquier: ???</p></div>
        <div class="bet-section">
            <div class="bet-options" id="bet-options"></div>
            <button class="btn btn-success" id="btn-confirm-bet" onclick="confirmBet()">âœ… Confirmer</button>
        </div>
        <div class="waiting-text" id="bet-waiting" style="display: none;">En attente des autres...</div>
    </div>
    
    <div class="screen" id="screen-game">
        <div class="game-header">
            <div>ğŸƒ <span id="game-deck-count">52</span> cartes</div>
            <div id="game-round-info">Tour 1</div>
        </div>
        <div class="game-table">
            <div class="dealer-zone">
                <div class="dealer-label">ğŸ© BANQUE</div>
                <div class="dealer-name" id="game-dealer-name">???</div>
                <div class="cards-row" id="dealer-cards"></div>
                <div class="score-badge" id="dealer-score">?</div>
            </div>
            <div class="my-game" id="my-game">
                <div class="my-game-header">
                    <div class="my-game-name"><span id="my-avatar">ğŸ˜</span> <span id="my-name">Moi</span></div>
                    <div class="my-game-bet" id="my-bet">2 gorgÃ©es</div>
                </div>
                <div class="cards-row" id="my-cards"></div>
                <div class="score-badge" id="my-score">?</div>
            </div>
            <div class="other-players" id="other-players"></div>
        </div>
        <div class="actions-bar" id="actions-bar" style="display: none;">
            <button class="btn btn-success" onclick="playerHit()">ğŸƒ Carte</button>
            <button class="btn btn-secondary" onclick="playerStand()">âœ‹ Stop</button>
            <button class="btn btn-accent" onclick="playerDouble()" id="btn-double">ğŸ’° Doubler</button>
            <button class="btn" onclick="playerSplit()" id="btn-split" style="display:none;">âœ‚ï¸ Split</button>
        </div>
        <div class="waiting-text" id="game-waiting">En attente de <span id="waiting-player">???</span>...</div>
    </div>
    
    <div class="screen" id="screen-results">
        <div class="logo"><div class="logo-icon">ğŸ†</div><h1 id="results-title">RÃ©sultats</h1></div>
        <div class="round-recap" id="round-recap"></div>
        <div class="round-drinks" id="round-drinks"></div>
        <div class="scoreboard-title">ğŸ“Š Scores cumulÃ©s</div>
        <div class="scoreboard" id="scoreboard"></div>
        <div class="btn-group" style="margin-top: 1rem;">
            <button class="btn" onclick="nextRound()" id="btn-next-round">ğŸ”„ Tour suivant</button>
            <button class="btn btn-accent" onclick="showFinalScores()">ğŸ Scores finaux</button>
        </div>
    </div>
    
    <div class="result-overlay" id="result-overlay" style="display: none;">
        <div class="result-card">
            <div class="result-icon" id="result-icon">ğŸ‰</div>
            <div class="result-title" id="result-title">Tu as gagnÃ© !</div>
            <div class="result-subtitle" id="result-subtitle">Score: 21</div>
            <div class="result-drinks" id="result-drinks">Safe !</div>
            <button class="btn" onclick="closeResultOverlay()">OK</button>
        </div>
    </div>
    
    <div class="toast" id="toast"></div>

    <script src="app.js"></script>
</body>
</html>
